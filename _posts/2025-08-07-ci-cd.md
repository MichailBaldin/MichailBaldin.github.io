---
layout: post
title: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CI/CD –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –Ω–∞ GitHub Actions
date: 2025-08-04
tags: [go, –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã, cicd, github-actions, telegram, devops]
---

# –ó–∞—á–µ–º CI/CD —Å —Å–∞–º–æ–≥–æ –Ω–∞—á–∞–ª–∞?

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–∞–∑–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ —Ä–µ—à–∏–ª —Å—Ä–∞–∑—É –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å CI/CD.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–∞–Ω–Ω–µ–≥–æ CI/CD:**

- –†–∞–Ω–Ω–µ–µ –≤—ã—è–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- –ü—Ä–∏–≤—ã—á–∫–∞ –¥–µ–ª–∞—Ç—å –Ω–µ–±–æ–ª—å—à–∏–µ, –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∫–æ–º–º–∏—Ç—ã
- –ú–æ—Ç–∏–≤–∞—Ü–∏—è ‚Äî –∑–µ–ª–µ–Ω—ã–µ –±–∏–ª–¥—ã —Å—Ç–∏–º—É–ª–∏—Ä—É—é—Ç –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å

# –í—ã–±–æ—Ä –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã

–î–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ GitHub –≤—ã–±–æ—Ä –±—ã–ª –æ—á–µ–≤–∏–¥–µ–Ω ‚Äî **GitHub Actions**. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã —Ç–∏–ø–∞ Jenkins –∏–ª–∏ GitLab CI —Ç—Ä–µ–±—É—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.

# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ CI/CD

–î–ª—è –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è —Å —Ç—Ä–µ–º—è —Å–µ—Ä–≤–∏—Å–∞–º–∏ —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–ª —Å–ª–µ–¥—É—é—â—É—é —Å—Ö–µ–º—É:

## –û—Å–Ω–æ–≤–Ω–æ–π CI (`ci.yml`)

–ó–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ `main` –∏ `develop` –≤–µ—Ç–∫–∞—Ö. –î–µ–ª–∞–µ—Ç –ø–æ–ª–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É:

- Go vet –¥–ª—è –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
- –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
- –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
- –°–±–æ—Ä–∫–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- Golangci-lint –ø—Ä–æ–≤–µ—Ä–∫–∏

## Feature CI (`feature.yml`)

–î–ª—è `feature/*` –≤–µ—Ç–æ–∫. –ë–æ–ª–µ–µ –±—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ ‚Äî –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏–∑–º–µ–Ω–∏–≤—à–∏–µ—Å—è —Å–µ—Ä–≤–∏—Å—ã –∏ —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –∏—Ö.

# Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

–†–µ—à–∏–ª –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram, —á—Ç–æ–±—ã –≤—Å–µ–≥–¥–∞ –±—ã—Ç—å –≤ –∫—É—Ä—Å–µ —Å—Ç–∞—Ç—É—Å–∞ –±–∏–ª–¥–æ–≤, –¥–∞–∂–µ –∫–æ–≥–¥–∞ –Ω–µ –∑–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–æ–º.

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞

–°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞ –æ–∫–∞–∑–∞–ª–æ—Å—å –ø—Ä–æ—â–µ –Ω–µ–∫—É–¥–∞:

```bash
# 1. –ù–∞–π—Ç–∏ @BotFather –≤ Telegram
# 2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É: /newbot
# 3. –°–ª–µ–¥–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –∏ –ø–æ–ª—É—á–∏—Ç—å TOKEN
```

–ü–æ–ª—É—á–µ–Ω–∏–µ Chat ID –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª–æ –Ω–µ–±–æ–ª—å—à–æ–π —Ö–∏—Ç—Ä–æ—Å—Ç–∏:

```bash
# 1. –ù–∞–ø–∏—Å–∞—Ç—å –±–æ—Ç—É –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
# 2. –û—Ç–∫—Ä—ã—Ç—å: https://api.telegram.org/bot<TOKEN>/getUpdates
# 3. –ù–∞–π—Ç–∏ chat.id –≤ JSON –æ—Ç–≤–µ—Ç–µ
```

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ workflow

–î–æ–±–∞–≤–∏–ª —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ –∫–æ–Ω—Ü–µ –∫–∞–∂–¥–æ–≥–æ job'–∞:

```yaml
- name: Notify Telegram on Success
  if: success()
  run: |
    curl -s -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage" \
      -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
      -d parse_mode="HTML" \
      -d text="<b>BUILD SUCCESS</b>%0A<b>Repo:</b> ${{ github.repository }}%0A<b>Branch:</b> ${{ github.ref_name }}%0A<b>Author:</b> ${{ github.actor }}"

- name: Notify Telegram on Failure
  if: failure()
  run: |
    curl -s -X POST "https://api.telegram.org/bot${{ secrets.TELEGRAM_BOT_TOKEN }}/sendMessage" \
      -d chat_id="${{ secrets.TELEGRAM_CHAT_ID }}" \
      -d parse_mode="HTML" \
      -d text="<b>BUILD FAILED</b>%0A<b>Repo:</b> ${{ github.repository }}%0A<b>Branch:</b> ${{ github.ref_name }}%0A<b>Job:</b> ${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }}"
```

# –ü—Ä–æ–±–ª–µ–º—ã –∏ –∏—Ö —Ä–µ—à–µ–Ω–∏–µ

## –ü—Ä–æ–±–ª–µ–º–∞ —Å Go Workspace

–ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫ CI –∑–∞–≤–µ—Ä—à–∏–ª—Å—è –æ—à–∏–±–∫–æ–π:

```bash
pattern ./...: directory prefix . does not contain modules listed in go.work or their selected dependencies
```

**–ü—Ä–∏—á–∏–Ω–∞:** –∫–æ–º–∞–Ω–¥–∞ `go vet ./...` –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞ —Å Go workspace.

**–†–µ—à–µ–Ω–∏–µ:** –∑–∞–ø—É—Å–∫–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã –∏–∑ –∫–∞–∂–¥–æ–π –ø–∞–ø–∫–∏ —Å–µ—Ä–≤–∏—Å–∞ –æ—Ç–¥–µ–ª—å–Ω–æ:

```yaml
- name: Go vet for all modules
  run: |
    cd services/gateway && go vet ./...
    cd ../users && go vet ./...
    cd ../products && go vet ./...
```

## –ü—Ä–æ–±–ª–µ–º–∞ —Å –≤–µ—Ä—Å–∏–µ–π Go

–í—Ç–æ—Ä–∞—è –æ—à–∏–±–∫–∞ –æ–∫–∞–∑–∞–ª–∞—Å—å –∫–æ–≤–∞—Ä–Ω–µ–µ:

```bash
go: go.work requires go >= 1.24.5 (running go 1.24.2)
```

**–ü—Ä–∏—á–∏–Ω–∞:** –í–æ–∑–º–æ–∂–Ω–æ –∫–∞–∫–∏–µ —Ç–æ –≥–ª—é–∫–∏ –≤ vscode. –í —Å–∏—Å—Ç–µ–º–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω Go 1.24.5 –∏ –≤ go.work —É–∫–∞–∑–∞–Ω–∞ –≤–µ—Ä—Å–∏—è 1.24.5.

**–†–µ—à–µ–Ω–∏–µ:** —É–∫–∞–∑–∞–ª –≤–æ –≤—Å–µ—Ö go.mod –∏ go.work –≤–µ—Ä—Å–∏—é 1.24:

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Golangci-lint

–ù–∞—á–∞–ª —Å –ø–æ–ª–Ω—ã–º –∫–æ–Ω—Ñ–∏–≥–æ–º –ª–∏–Ω—Ç–µ—Ä–∞, –Ω–æ –ø–æ–ª—É—á–∏–ª –¥–µ—Å—è—Ç–∫–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –Ω–∞ –ø—É—Å—Ç—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö. –£–ø—Ä–æ—Å—Ç–∏–ª –¥–æ –±–∞–∑–æ–≤–æ–≥–æ –Ω–∞–±–æ—Ä–∞:

```yaml
linters:
  enable:
    - errcheck
    - gosimple
    - govet
    - ineffassign
    - staticcheck
    - typecheck
    - unused
    - gofmt
    - goimports
```

# –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ß—Ç–æ–±—ã –Ω–µ –ª–æ–º–∞—Ç—å –±–∏–ª–¥—ã, —Å–æ–∑–¥–∞–ª Makefile –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —ç–º—É–ª—è—Ü–∏–∏ CI:

```makefile
ci-local:
	@echo "üîÑ Running local CI checks..."
	go work sync
	cd services/gateway && go mod tidy
	cd services/users && go mod tidy
	cd services/products && go mod tidy
	cd services/gateway && go vet ./...
	cd services/users && go vet ./...
	cd services/products && go vet ./...
	# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
	@UNFORMATTED=$$(find . -name "*.go" -not -path "./vendor/*" | xargs gofmt -s -l); \
	if [ -n "$$UNFORMATTED" ]; then \
		echo "The following files are not formatted:"; \
		echo "$$UNFORMATTED"; \
		exit 1; \
	fi
	cd services/gateway && go test -v ./...
	cd services/users && go test -v ./...
	cd services/products && go test -v ./...
	cd services/gateway && go build .
	cd services/users && go build .
	cd services/products && go build .
	@echo "All CI checks passed!"
```

–¢–µ–ø–µ—Ä—å –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –∫–æ–º–º–∏—Ç–æ–º –∑–∞–ø—É—Å–∫–∞—é `make ci-local` ‚Äî —ç—Ç–æ —ç–∫–æ–Ω–æ–º–∏—Ç –≤—Ä–µ–º—è –∏ –Ω–µ—Ä–≤—ã.

# –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—Å–µ—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–ª—É—á–∏–ª —Ä–∞–±–æ—á–∏–π CI/CD pipeline:

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏** –¥–ª—è –≤—Å–µ—Ö –ø—É—à –≤ main/develop
- **–ë—ã—Å—Ç—Ä—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏** –¥–ª—è feature –≤–µ—Ç–æ–∫
- **Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** —Å –∫—Ä–∞—Å–∏–≤—ã–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
- **–õ–∏–Ω—Ç–µ—Ä** –¥–ª—è –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ CI/CD —Ñ–∞–π–ª–æ–≤:

```
.github/
‚îú‚îÄ‚îÄ workflows/
‚îÇ   ‚îú‚îÄ‚îÄ ci.yml          # –û—Å–Ω–æ–≤–Ω–æ–π CI –¥–ª—è main/develop
‚îÇ   ‚îî‚îÄ‚îÄ feature.yml     # –ë—ã—Å—Ç—Ä—ã–π CI –¥–ª—è feature –≤–µ—Ç–æ–∫
.golangci.yml           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ª–∏–Ω—Ç–µ—Ä–∞
Makefile               # –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```

# –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–í –ø–ª–∞–Ω–∞—Ö –¥–æ–±–∞–≤–∏—Ç—å:

- **Docker build** ‚Äî –∫–æ–≥–¥–∞ –ø–æ—è–≤—è—Ç—Å—è Dockerfile'—ã
- **Security scanning** ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **Coverage reporting** ‚Äî –∫–æ–≥–¥–∞ –Ω–∞–∫–æ–ø—è—Ç—Å—è —Ç–µ—Å—Ç—ã
- **Automatic releases** ‚Äî —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ–∫–∞ —á—Ç–æ —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á—É—Å—å –Ω–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ —Å–µ—Ä–≤–∏—Å–æ–≤. –ì–ª–∞–≤–Ω–∞—è —Ü–µ–ª—å –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞ ‚Äî –µ—Å—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö.

# –í—ã–≤–æ–¥—ã

–ù–∞—Å—Ç—Ä–æ–π–∫–∞ CI/CD –≤ –Ω–∞—á–∞–ª–µ –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî –æ–¥–Ω–æ –∏–∑ –ª—É—á—à–∏—Ö —Ä–µ—à–µ–Ω–∏–π. –ü–æ—Ç—Ä–∞—Ç–∏–ª –ø–∞—Ä—É —á–∞—Å–æ–≤ –Ω–∞ setup, –Ω–æ —Ç–µ–ø–µ—Ä—å –∫–∞–∂–¥—ã–π –∫–æ–º–º–∏—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é –ø—Ä–æ–≤–µ—Ä–∫—É.

–í —Å–ª–µ–¥—É—é—â–µ–º –ø–æ—Å—Ç–µ –Ω–∞—á–Ω—É —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É –ø–µ—Ä–≤–æ–≥–æ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞ ‚Äî user-service —Å —á–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é.
